<html> 
<head> 
<title>demo.htm</title> 
<meta http-equiv="content-type" content="text/html; charset=UTF-8"> 

<style type="text/css"> 
#target{
	position: absolute;
background:#aaa; 
width: 200px; 
height: 200px; 
} 
</style> 
</head> 
<body> 
<div id="target"></div>
<script src="../js/jquery.min.js" type="text/javascript"></script> 
<script>
$(document).ready(function() 
{ 


// $("#target").mousedown(function(e)//e鼠标事件 
// { 
// $(this).css("cursor","move");//改变鼠标指针的形状 
// var offset = $(this).offset();//DIV在页面的位置 
// var x = e.pageX - offset.left;//获得鼠标指针离DIV元素左边界的距离 
// var y = e.pageY - offset.top;//获得鼠标指针离DIV元素上边界的距离 
// $(document).bind("mousemove",function(ev)//绑定鼠标的移动事件，因为光标在DIV元素外面也要有效果，所以要用doucment的事件，而不用DIV元素的事件 
// { 
// $("#target").stop();//加上这个之后 
// var _x = ev.pageX - x;//获得X轴方向移动的值 
// var _y = ev.pageY - y;//获得Y轴方向移动的值 
// $("#target").animate({left:_x+"px",top:_y+"px"},10); 
// }); 
// }); 
// $(document).mouseup(function() 
// { 
// $("#target").css("cursor","default"); 
// $(this).unbind("mousemove"); 
// }) 

      var $div = $("#target");
      /* 绑定鼠标左键按住事件 */
      $div.bind("mousedown",function(event){
        /* 获取需要拖动节点的坐标 */
        var offset_x = $(this)[0].offsetLeft;//x坐标
        var offset_y = $(this)[0].offsetTop;//y坐标
        /* 获取当前鼠标的坐标 */
        var mouse_x = event.pageX;
        var mouse_y = event.pageY;
        /* 绑定拖动事件 */
        /* 由于拖动时，可能鼠标会移出元素，所以应该使用全局（document）元素 */
        $(document).bind("mousemove",function(ev){
          /* 计算鼠标移动了的位置 */
          var _x = ev.pageX - mouse_x;
          var _y = ev.pageY - mouse_y;
          /* 设置移动后的元素坐标 */
          var now_x = (offset_x + _x ) + "px";
          var now_y = (offset_y + _y ) + "px";
          /* 改变目标元素的位置 */
          $div.css({
            top:now_y,
            left:now_x
          });
        });
      });
      /* 当鼠标左键松开，接触事件绑定 */
      $(document).bind("mouseup",function(){
        $(this).unbind("mousemove");
      });


});
</script>
</body> 
</html> 